!function(){"use strict";var e,t={354:function(){var e=window.wp.blocks;function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},t.apply(this,arguments)}var l=window.wp.element,n=window.wp.components,a=window.React,r=(0,a.memo)((e=>{let{codeMode:t,fileName:n}=e;return"code-onclick"===t&&""===n?(0,l.createElement)("p",{className:"filename-err"},"※表示方法が全文省略の場合必須です"):null})),o=(0,a.memo)((e=>{let{codeMode:t,excerptLength:a,setAttributes:r}=e;return"code-excerpt"===t?(0,l.createElement)(n.TextControl,{label:"表示する行数を設定",type:"number",className:"row-number",value:a,onChange:e=>r({excerptLength:e})}):null})),i=(0,a.memo)((e=>{let{codeMode:t,excerptLength:a,setAttributes:r}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.RadioControl,{className:"fileShowMode",label:"Codeの表示方法",selected:t,options:[{label:"全文表示",value:"code-all"},{label:"全文省略（ClickでOPEN）",value:"code-onclick"},{label:"行数指定",value:"code-excerpt"}],onChange:e=>r({codeMode:e})}),(0,l.createElement)(o,{codeMode:t,excerptLength:a,setAttributes:r}))})),c=(0,a.memo)((e=>{let{codeArea:t,setAttributes:a}=e,r=t.split(/\r|\r\n|\n/).length>3?t.split(/\r|\r\n|\n/).length:3;return(0,l.createElement)(n.TextareaControl,{placeholder:"Code...",value:t,onChange:e=>a({codeArea:e}),rows:r})})),s=window.wp.blockEditor,u=(0,a.memo)((e=>{let{isEditMode:t,setAttributes:a}=e;return(0,l.createElement)(s.BlockControls,null,(0,l.createElement)(n.Toolbar,null,(0,l.createElement)(n.Button,{label:t?"Preview":"Edit",icon:t?"format-image":"edit",className:"preview-button",onClick:()=>a({isEditMode:!t})})))})),m=e=>{let{attributes:t,setAttributes:a}=e;return(0,l.createElement)(s.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:"シンタックスハイライト設定",initialOpen:!0},(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.ToggleControl,{label:t.linenums?"行番号(表示）":"行番号（非表示）",checked:t.linenums,onChange:e=>a({linenums:e})})),t.linenums&&(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.TextControl,{label:"開始する行番号",type:"number",value:t.linenumStart,onChange:e=>a({linenumStart:parseInt(e)})})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:"ブロックの配置",value:t.align,options:[{label:"なし",value:""},{label:"左寄せ",value:"left"},{label:"中央寄せ",value:"center"},{label:"右寄せ",value:"right"},{label:"幅広",value:"wide"}],onChange:e=>a({align:e})})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.CheckboxControl,{label:"最大幅を指定",checked:t.maxWidthEnable,onChange:e=>a({maxWidthEnable:e}),help:"※ インラインスタイルで設定します"})),t.maxWidthEnable&&(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.RangeControl,{label:"最大幅設定",value:t.maxWidth,onChange:e=>a({maxWidth:parseInt(e)}),min:300,max:1800,step:10,help:"最大幅を px で指定します"})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:"言語選択",value:t.lang,options:[{label:"Default",value:""},{label:"CSS",value:"css"},{label:"SQL",value:"sql"},{label:"PHP",value:"php"},{label:"JavaScript",value:"js"},{label:"SASS",value:"scss"},{label:"Bash",value:"bash"},{label:"Java",value:"java"},{label:"C++",value:"c++"}],help:"※ 適切な言語を設定することで綺麗にハイライトされます",onChange:e=>a({lang:e})})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:"書式設定",value:t.fontFamily,options:[{label:"デフォルト",value:"default"},{label:"MS P明朝",value:"MS P明朝"},{label:"Menlo",value:"Menlo"},{label:"monospace",value:"monospace"},{label:"Courier",value:"Courier"},{label:"Ricty Diminished",value:"Ricty Diminished"}],onChange:e=>a({fontFamily:e})})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:"デザインスキン",value:t.skin,options:[{label:"Basic",value:""},{label:"Desert",value:"desert"},{label:"Doxy",value:"doxy"},{label:"Sons-of-obsidian",value:"sons-of-obsidian"},{label:"Sunburst",value:"sunburst"}],onChange:e=>a({skin:e})}))))},d=e=>{let{className:t,attributes:n}=e;console.log("PreviewRenderレンダー");const{codeArea:a,align:r,skin:o,fileName:i,maxWidthEnable:c,linenumStart:s,linenums:u,lang:m,fontFamily:d,maxWidth:b}=n;if(""===a)return null;let p="",v={},h="",f={};return r&&(p=" align"+r),o&&(p+=" "+o),i&&(p+=" filename_wrapper"),c&&(v={maxWidth:b}),u&&(h=" linenums",1!==s&&(h+=":"+s)),m&&(h+=" lang-"+m),"default"!==d&&(f={fontFamily:d}),(0,l.createElement)("div",{className:t+p,style:v},n.fileName&&(0,l.createElement)("p",{className:"file_name"},n.fileName),(0,l.createElement)("pre",{className:"prettyprint"+h,style:f},n.codeArea))};(0,e.registerBlockType)("oja/code-gutenberg",{title:"Oja Code Gutenberg",description:"プログラミング言語をシンタックスハイライトします ",icon:"smiley",category:"common",keywords:["code","oja","pre"],supports:{customClassName:!1,anchor:!1},edit:function(e){const a=(0,s.useBlockProps)(),{attributes:{codeArea:o,fileName:b},attributes:p,className:v,setAttributes:h}=e,{isEditMode:f,codeMode:E,excerptLength:g,...C}=p;return(0,l.useEffect)((()=>{PR.prettyPrint()}),[f]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(u,{isEditMode:f,setAttributes:h}),(0,l.createElement)(m,{attributes:p,setAttributes:h}),f&&[(0,l.createElement)("div",t({},a,{className:v}),(0,l.createElement)(r,{codeMode:E,fileName:b}),(0,l.createElement)(n.TextControl,{label:"File Name",type:"string",className:"filename",value:b,onChange:e=>h({fileName:e})}),(0,l.createElement)(i,{codeMode:E,excerptLength:g,setAttributes:h}),(0,l.createElement)(c,{codeArea:o,setAttributes:h}))],!p.isEditMode&&[(0,l.createElement)(n.Button,{onClick:()=>h({isEditMode:!0}),isLink:!0,icon:"edit"},"編集モード"),d(e)])},save:()=>null})}},l={};function n(e){var a=l[e];if(void 0!==a)return a.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=function(t,l,a,r){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],r=e[u][2];for(var i=!0,c=0;c<l.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](l[c])}))?l.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[l,a,r]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,46:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,r,o=l[0],i=l[1],c=l[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var u=c(n)}for(t&&t(l);s<o.length;s++)r=o[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},l=self.webpackChunkoja_code_gutenberg=self.webpackChunkoja_code_gutenberg||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var a=n.O(void 0,[46],(function(){return n(354)}));a=n.O(a)}();